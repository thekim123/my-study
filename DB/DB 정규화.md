---
Date: 2025-02-17
Category: DB
---
각 정규형의 개념을 단순한 예시와 함께 설명해 볼게요.

---
1. **1차 정규화 (1NF)**
    
    - **원자성(Atomicity):**  
        각 칼럼(열)에는 하나의 값만 들어가야 합니다.  
        예를 들어, 전화번호 칼럼에 "010-1111-2222, 010-3333-4444" 같이 두 개의 번호를 한 칼럼에 넣지 않고, 각각 따로 기록해야 합니다.
2. **2차 정규화 (2NF)**
    
    - **부분적 함수 종속 제거:**  
        1NF를 만족하면서, 테이블의 기본키가 여러 칼럼(복합키)으로 이루어진 경우, 기본키의 일부에만 종속되는 칼럼이 있으면 안 됩니다.  
        예를 들어, 학생-과목 테이블에서 기본키가 (학생ID, 과목ID)라면, 학생의 이름 같은 정보는 학생ID에만 종속되므로 별도의 학생 테이블로 분리합니다.
3. **3차 정규화 (3NF)**
    
    - **이행적 함수 종속 제거:**  
        2NF를 만족하면서, 기본키가 아닌 칼럼들이 서로 의존하면 안 됩니다.  
        즉, 비주요 속성이 다른 비주요 속성에 의존하지 않고, 오직 기본키에만 의존해야 합니다.  
        예를 들어, 어떤 테이블에 "직원ID", "부서ID", "부서위치"가 있다면, 부서위치는 부서ID에 의존하므로 부서 정보를 별도로 분리해야 합니다.

이렇게 정규화를 거치면 데이터 중복이 줄어들어, 데이터 수정, 삽입, 삭제 시 발생할 수 있는 이상(Anomaly)을 예방할 수 있습니다.

요약하면,

- **정규화는 데이터베이스의 품질을 높이고 유지보수를 쉽게 하려는 "데이터 정리" 작업입니다.**
- 1NF는 **각 칼럼에 하나의 값만**,
- 2NF는 **모든 비주요 정보가 기본키 전체에만 종속되도록**,
- 3NF는 **비주요 정보 간의 불필요한 의존성을 제거하는 것**입니다.


---

### BCNF (Boyce-Codd Normal Form)

**예시:**  
**상황:** 호텔 정보를 저장하는 테이블이 있다고 가정해 봅시다.

- **속성:** Hotel, Room, Phone
- **제약 조건:**
    - 각 호텔은 여러 객실(Room)을 가질 수 있고,
    - 호텔마다 전화번호(Phone)는 하나로 고정됩니다.
- **후보키:** (Hotel, Room) — 호텔과 객실 번호의 조합이 각 레코드를 유일하게 식별합니다.
- **함수적 종속:** Hotel → Phone
    - 즉, 호텔 이름만 알면 그 호텔의 전화번호를 알 수 있습니다.

**문제점:**  
BCNF의 조건은 "모든 결정자(함수적 종속의 왼쪽 부분)가 후보키여야 한다"인데, 여기서는 Hotel이 후보키가 아닙니다.  
따라서 이 테이블은 BCNF를 위반합니다.

**해결 방법:**  
테이블을 두 개로 분해합니다.

4. Hotel 테이블: (Hotel, Phone)
5. Room 테이블: (Hotel, Room)  
    이렇게 분해하면 각 테이블의 결정자가 후보키가 되어 BCNF를 만족하게 됩니다.

---

### 4NF (Fourth Normal Form)

4NF는 **다치 종속(Multi-valued Dependency, MVD)**을 제거하는 정규형입니다.

**예시:**  
**상황:** 학생이 수강하는 강의와 취미를 한 테이블에 저장한다고 가정합시다.

- **속성:** Student, Course, Hobby
- **후보키:** Student (각 학생마다 여러 강의와 여러 취미가 있지만 학생 ID가 유일 식별자라고 가정)
- **다치 종속:**
    - Student →> Course (학생은 여러 강의를 수강)
    - Student →> Hobby (학생은 여러 취미를 가질 수 있음)
- **문제:**  
    강의와 취미가 서로 독립적입니다. 즉, 한 학생의 강의 정보와 취미 정보가 서로 연관되어 있지 않은데도 한 테이블에 모두 저장하면, 한 학생의 강의와 취미가 모든 조합으로 중복 기록되어 데이터 중복이 발생합니다.

**해결 방법:**  
테이블을 두 개로 분해합니다.

6. Student_Course 테이블: (Student, Course)
7. Student_Hobby 테이블: (Student, Hobby)  
    이렇게 하면 각 테이블에서 다치 종속 문제가 해결되어 4NF를 만족합니다.

---

### 5NF (Fifth Normal Form, 또는 PJNF)

5NF는 **조인 종속(Join Dependency)** 을 해결하는 정규형으로, 여러 테이블로 분해한 후에도 원래 테이블을 정확히 복원할 수 있어야 한다는 원칙입니다.  
5NF는 매우 복잡한 다대다 관계에서 등장하는 경우가 많습니다.

**예시:**  
**상황:** 공급업체, 부품, 프로젝트 간의 관계를 저장하는 테이블을 생각해 봅니다.

- **속성:** Supplier, Part, Project
- **상황 설명:**
    - 각 공급업체는 특정 부품들을 공급하고,
    - 각 부품은 여러 프로젝트에서 사용될 수 있으며,
    - 특정 프로젝트에서는 여러 공급업체로부터 부품을 받을 수 있습니다.
- **문제:**  
    이 세 속성 간의 관계는 단순한 두 속성 간의 함수적 종속으로 설명할 수 없으며, 세 속성을 모두 고려한 조인 종속성이 있습니다.
- **5NF 조건:**  
    테이블을 더 작은 테이블(예: Supplier-Part, Part-Project, Supplier-Project)로 분해해도, 이들 테이블을 조인하여 원래의 관계를 정확히 복원할 수 있어야 합니다.  
    만약 이를 만족하면서 더 이상 분해할 수 없다면 해당 테이블은 5NF에 도달한 것입니다.

**실제 예시:**  
실무에서 5NF에 해당하는 경우는 매우 드물며, 주로 아주 복잡한 다대다 관계를 다룰 때 이론적으로 고려됩니다.

---

### 정리

- **BCNF:** 모든 결정자가 후보키여야 함.  
    → 예: 호텔 테이블에서 Hotel → Phone을 분리하여 BCNF 만족.
    
- **4NF:** 다치 종속을 제거.  
    → 예: 학생의 강의와 취미 정보를 별도 테이블로 분리.
    
- **5NF:** 조인 종속을 모두 제거.  
    → 예: 공급업체, 부품, 프로젝트 관계에서 복잡한 조인 종속을 분해하여 원래 데이터를 정확히 복원할 수 있도록 함.
    

이렇게 정규화 단계별로 예시를 살펴보면, 각 정규형이 왜 필요한지, 어떤 문제를 해결하는지를 좀 더 쉽게 이해할 수 있을 거예요.