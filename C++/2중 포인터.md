---
Date: 2024-12-02
Category: C++
---
C++을 배우다 보면 메모리에 대한 이야기가 대부분 주를 이룬다. 아직 초반이라 그런 걸까? 자바를 배울 때는 객체 지향에 대한 이야기가 주를 이루었고, 어떻게 하면 현실 세계의 개념을 객체로 잘 표현할 수 있을지가 주된 포인트였던 것 같다.

예를 들어, 2차원 배열을 만들 때 2중 포인터를 사용했다. 그런데 하다 보니 "왜 굳이 이렇게 써야 할까?"라는 생각이 들었다.

```cpp
float** arrays_ = nullptr; // 2중 포인터
```

이렇게 선언한 후에 다음과 같이 초기화할 수도 있다.

```cpp
float** arrays_ = new float*[3]; // 포인터 배열 할당 
arrays_[0] = new float(1.0f); // 크기가 1인 배열 
arrays_[1] = new float[5]; // 크기가 5인 배열 
arrays_[2] = new float[3]; // 크기가 3인 배열
```

문제를 잘못 다루면 NPE(Null Pointer Exception) 같은 오류가 발생해서 프로그램이 크래시될 수도 있겠다는 생각이 들었다. 이 언어는 정말로 세심한 주의가 필요한 언어라는 느낌이 든다. 제대로 다루지 않으면 사고가 날 가능성이 높다.

그렇다면 이런 위험을 감수하면서도 왜 이런 방식이 사용되는 걸까? 내가 지금 작업 중인 것은 행렬을 다루는 코드다. 만약 행렬 크기가 매우 크다면, 메모리에 연속적으로 배열을 할당할 수 없는 경우가 생길 수도 있다. 특히 메모리 부족이 우려되는 경우, 배열을 연속적으로 배치하는 것이 불가능해질 가능성이 커진다. 이럴 때 이런 방식이 유용하다고 한다!

---