---
Date: 2024-12-12
Category: Java
---
본의 아니게 `ArrayList`를 뜯어보게 되었다. `ArrayList`를 보고 신기했던 것을 기록해보려고 한다. 나는 그동안 자료 담을 때면 무지성으로 ArrayList를 써왔다. 물론 오늘 뜯어보고 나서 왜 그동안 큰 문제가 없는지도 알게 되었다.... 일단 알아보자...

## 1. add
`add`는 신기하게도 처음에 10개로 시작하여 1.5배씩 리사이즈를 하는 형식으로 진행된다. 여기서 resize를 하는 매서드가 `grow`이다. 얘는 O(1)의 시간복잡도를 가진다.

## 2. remove
이 메서드는 나중에 `fastRemove`메서드를 실행시킨다. 그럼 얘는 맨끝의 요소를 제거하는 경우가 아니면 배열을 한 칸씩 미는 동작을 하게 되는데 이게 `System.arraycopy`가 하는 역할이다.
```java
public boolean remove(Object o) {  
	...
    fastRemove(es, i);  
    return true;  
}  
  
/**  
 * Private remove method that skips bounds checking and does not * return the value removed. */
private void fastRemove(Object[] es, int i) {  
    modCount++;  
    final int newSize;  
    if ((newSize = size - 1) > i)  
        System.arraycopy(es, i + 1, es, i, newSize - i);  
    es[size = newSize] = null;  
}
```

그럼 맨 끝의 요소를 제거하는 경우를 빼고는 array카피를 항상 한다는 것이다. O(n)의 시간 복잡도를 가진다.

## 3. trimToSize
